@model MendinePayroll.Models.EmployeeListModel
@{
    ViewBag.Title = "EmployeePayableSalary";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section role="main" class="content-body">
    <header class="page-header">
        <h2>Employee Salary  Details</h2>
    </header>
    <!-- start: page -->
    <section class="panel">
        <header class="panel-heading">
            <a href="#" onclick="return GetSalaryHistory('@Model.sempid');" data-toggle="modal" data-target="#detail" class="btn btn-primary">
                View Salary History<i class="text-blue fa fa-arrow-circle-o-right fa-lg"></i>
            </a>
            <div class="panel-actions">

                <button id="" onclick="BacktoMain();" class="mb-sm mt-xs mr-xs  btn btn-sm btn-default text-sm text-weight-semibold"><i class="text-tertiary fa fa-arrow-circle-left  ml-lg"></i>Back</button>
            </div>
        </header>
        <div class="modal-body">
            <form>
                <div class="row">
                    <div class="col-md-12 clearfix-height20"></div>
                    <div class='col-sm-6'>
                        <div class="form-group">
                            <label class="control-label">Employee Name <span class="required">*</span></label>
                            <div class="input-group btn-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-user"></i>
                                </span>
                                @Html.HiddenFor(M => M.empid)
                                @Html.TextBoxFor(M => M.EmployeeName, new { @class = "form-control", @readonly = "readonly" })
                                @Html.HiddenFor(M => M.empno)
                                <input type="hidden" id="txtBasic" value="0" />
                                <input type="hidden" id="txtMobileall" value="0" />
                                @*<input type="hidden" id="txtInternetall" value="0" />

                            <input type="hidden" id="txtContinuousAllowance" value="0" />*@
                                <input type="hidden" id="txtClosingBlnc" value="0" />

                            </div>
                            <span id="msgPayGroupNameedit" class="ms-error" style="color:red;"></span>

                        </div>
                    </div>
                    <div class='col-sm-6'>
                        <div class="form-group">
                            <label class="control-label">Employee Code<span class="required">*</span></label>
                            <div class="input-group btn-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-qrcode"></i>
                                </span>
                                @Html.TextBoxFor(M => M.empcode, new { @class = "form-control", @readonly = "readonly" })
                                <input type="hidden" id="txtLoanID" value="0" />
                            </div>
                            <span id="msgDescriptionedit" style="color:red;"></span>
                        </div>
                    </div>
                    <div class="col-md-12 clearfix-height20"></div>
                    <div class='col-sm-6'>
                        <div class="form-group">
                            <label class="control-label">Designation <span class="required">*</span></label>
                            <div class="input-group btn-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-desktop"></i>
                                </span>
                                @Html.TextBoxFor(M => M.Designation, new { @class = "form-control", @readonly = "readonly" })
                            </div>
                            <span id="msgMastercodeeedit" class="ms-error" style="color:red;"></span>
                        </div>
                    </div>

                    <div class='col-sm-6'>
                        <div class="form-group">
                            <label class="control-label">Department <span class="required">*</span></label>
                            <div class="input-group btn-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-building-o"></i>
                                </span>
                                @*<input type="text" class="form-control" id="txtDept" readonly="readonly">*@
                                @Html.TextBoxFor(M => M.Department, new { @class = "form-control", @readonly = "readonly" })
                            </div>
                            <span id="msgConcernHRPersonneledit" style="color:red;"></span>

                        </div>
                    </div>
                    <div class="col-md-12 clearfix-height20"></div>
                    <div class='col-sm-6'>
                        <div class="form-group">
                            <label class="control-label">UAN NO <span class="required">*</span></label>
                            <div class="input-group btn-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-bank"></i>
                                </span>
                                @Html.TextBoxFor(M => M.empuanno, new { @class = "form-control", @readonly = "readonly" })
                            </div>
                            <span id="msgMastercodeeedit" class="ms-error" style="color:red;"></span>
                        </div>
                    </div>

                    <div class='col-sm-6'>
                        <div class="form-group">
                            <label class="control-label">A/C NO <span class="required">*</span></label>
                            <div class="input-group btn-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-bank"></i>
                                </span>
                                @*<input type="text" class="form-control" id="txtACno" readonly>*@
                                @Html.TextBoxFor(M => M.empaccountno, new { @class = "form-control", @readonly = "readonly" })
                            </div>
                            <span id="msgConcernHRPersonneledit" style="color:red;"></span>

                        </div>
                    </div>

                </div>
            </form>
            <table class="table table-responsive mb-none" id="dttable">
                <thead>
                    <tr>
                        <th class="center">
                            Allowance

                            <input id="divallowancesID" type="hidden" value="1">

                        </th>
                        <th class="center">
                            Deductions
                            <input id="divID" type="hidden" value="1">
                        </th>
                    </tr>
                </thead>
                <tbody id="listVehicle1">
                    <tr>

                        <td>
                            <div id="main">

                                <div id="divDynamicAllowances"></div>

                                <div class=" row">
                                    <div class="col-sm-3" style="width: 200px;">
                                        <div class="form-group">
                                            <label> Continuous Attendance Allowance</label>

                                            <span class="field-validation-error" id="errorStatus" style="color: Red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 input-group btn-group" style="width:150px;">
                                        <span class="input-group-addon" id="errorStatus"><i class="fa fa-inr"></i></span>
                                        <input type="text" class="form-control clsallowance" id="txtContinuous" readonly />
                                        <span class="field-validation-error" id="errorStatus" style="color: Red;"></span>
                                    </div>

                                </div>

                                <div class=" row">
                                    <div class="col-sm-3" style="width: 200px;">
                                        <div class="form-group">
                                            <label>Production Bonus</label>
                                            <span class="field-validation-error" id="errorStatus" style="color: Red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 input-group btn-group" style="width:150px;">
                                        <span class="input-group-addon" id="errorStatus"><i class="fa fa-inr"></i></span>
                                        <input type="text" class="form-control clsallowance" id="txtProduction" readonly />
                                        <span class="field-validation-error" id="errorStatus" style="color: Red;"></span>
                                    </div>

                                </div>

                                <div class=" row">
                                    <div class="col-sm-3" style="width: 200px;">
                                        <div class="form-group">
                                            <label> OverTime Allowance</label>
                                            <span class="field-validation-error" id="errorStatus" style="color: Red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 input-group btn-group" style="width:150px;">
                                        <span class="input-group-addon" id="errorStatus"><i class="fa fa-inr"></i></span>
                                        <input type="text" class="form-control clsallowance" id="txtOverTime" readonly />
                                        <span class="field-validation-error" id="errorStatus" style="color: Red;"></span>
                                    </div>

                                </div>

                            </div>


                        </td>
                        <td>
                            <div id="main2">

                                <div id="divDynamicDeducations"></div>

                            </div>

                        </td>
                    </tr>

                </tbody>
            </table>
            <table class="table table-responsive mb-none" id="dttable">
                <thead>
                    <tr>
                        <th class="left">
                            Arrears
                        </th>

                    </tr>
                </thead>
                <tbody id="listVehicle1">
                    <tr>

                        <td>
                            <div id="main">
                                <input id="txtinternet" type="hidden" value="0">
                                <div id="divDynamicArrears"></div>


                            </div>

                        </td>

                    </tr>

                </tbody>
            </table>


            <table class="table table-responsive mb-none" id="dttable">
                <thead>
                    <tr>
                    </tr>
                </thead>
                <tbody id="listVehicle1">
                    <tr>

                        <td>
                            <div id="main">
                                <div id="divDynamicBasci"></div>
                                <div class=" row">
                                    <div class="col-sm-3" style="width: 200px;">
                                        <div class="form-group">
                                            <label> Total Allowance</label>
                                            <span class="field-validation-error" id="errorStatus" style="color: Red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 input-group btn-group" style="width:150px;">
                                        <span class="input-group-addon" id="errorStatus"><i class="fa fa-inr"></i></span>
                                        <input type="text" class="form-control" id="TotalAllowance" readonly />
                                        <span class="field-validation-error" id="errorStatus" style="color: Red;"></span>
                                    </div>

                                </div>
                                <div class=" row">
                                    <div class="col-sm-3" style="width: 200px;">
                                        <div class="form-group">
                                            <label> Total Arrears</label>
                                            <span class="field-validation-error" id="errorStatus" style="color: Red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 input-group btn-group" style="width:150px;">
                                        <span class="input-group-addon" id="errorStatus"><i class="fa fa-inr"></i></span>
                                        <input type="text" class="form-control" id="txtTotalArrears" readonly />
                                        <span class="field-validation-error" id="errorStatus" style="color: Red;"></span>
                                    </div>

                                </div>
                                @*<div id="txtTotalArrears"></div>*@

                                <div class=" row">
                                    <div class="col-sm-3" style="width: 200px;">
                                        <div class="form-group">
                                            <label> GrossAmount</label>
                                            <span class="field-validation-error" id="errorStatus" style="color: Red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 input-group btn-group" style="width:150px;">
                                        <span class="input-group-addon" id="errorStatus"><i class="fa fa-inr"></i></span>
                                        <input type="text" class="form-control" id="txtfgrossamount" readonly />
                                        <span class="field-validation-error" id="errorStatus" style="color: Red;"></span>
                                    </div>

                                </div>


                            </div>

                        </td>

                    </tr>

                </tbody>
            </table>




            <div class="col-md-12"><br /></div>
            <table style="width:100%; margin:auto; margin-bottom:10px;" class="table table-bordered">
                <thead>
                    <tr>
                        <th scope="col" colspan="4" style="background-color:greenyellow">Leave Details</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row" style="width:25%;">Month Name</th>
                        <td scope="col" style="width:25%;"><span id="lblMonthName"></span></td>

                        <th scope="row" style="width:25%;">Working Day</th>
                        <td scope="col" style="width:25%;"><span id="lblWorkingDays"></span></td>

                    </tr>


                    @*@if (Convert.ToString(Session["UserEmail"]) == Convert.ToString(TempData["LeaveEdit"]))
                {*@
                    <tr>

                        <th scope="row" style="width:25%;">Leave Without Pay</th>
                        <td style="width:25%;">
                            <input type="text" id="txtLeaveWithoutpay" class="form-control" name="LeaveWithoutPay" @*onchange="return LWPOnComponent();"*@ />
                        </td>
                        <th scope="row" style="width:25%;">Leave Amount</th>
                        <td style="width:25%;"><span id="lblLeaveWithoutPayamt"></span></td>
                    </tr>
                    <tr>
                        <th scope="row" style="width:25%;">No of Leave Deduction Due To Late</th>
                        <td style="width:25%;">
                            <input type="text" id="txtlatedays" class="form-control" name="latedays" onchange="return ChangeLeaveDetails(this.name, this.value);" readonly />
                        </td>
                        <th scope="row" style="width:25%;">Leave Amount Due To Late</th>
                        <td style="width:25%;"><span id="lbllatedaysamt"></span></td>
                    </tr>

                    @*}
                else
                {
                    <tr>

                        <th scope="row" style="width:25%;">Leave Without Pay</th>
                        <td style="width:25%;">
                            <input type="text" readonly id="txtLeaveWithoutpay" class="form-control" name="LeaveWithoutPay" onchange="return ChangeLeaveDetails(this.name, this.value);" />
                        </td>
                        <th scope="row" style="width:25%;">Leave Amount</th>
                        <td style="width:25%;"><span id="lblLeaveWithoutPayamt"></span></td>
                    </tr>
                    <tr>
                        <th scope="row" style="width:25%;">No of Leave Deduction Due To Late</th>
                        <td style="width:25%;">
                            <input type="text" readonly id="txtlatedays" class="form-control" name="latedays" onchange="return ChangeLeaveDetails(this.name, this.value);" />
                        </td>
                        <th scope="row" style="width:25%;">Leave Amount Due To Late</th>
                        <td style="width:25%;"><span id="lbllatedaysamt"></span></td>
                    </tr>
                }*@
                    <tr>

                        <th scope="row" style="width:25%;" colspan="2">Absent Day</th>
                        <td scope="col" style="width:25%;" colspan="2"><span id="lblAbsentDays"></span></td>
                    </tr>
                </tbody>


            </table>
            @if (Convert.ToString(Session["UserEmail"]) == Convert.ToString(TempData["LeaveEdit"]))
            {
                <button type="button" id="btnSaveLeave" class="=btn btn-primary" style="float:right" onclick="SaveLeaveDetails();">Save</button>
            }
            <div class="col-md-12"></div>
            <div class="col-md-12"><br /></div>
            <table style="width:100%; margin:auto; margin-bottom:10px;" class="table table-bordered">
                <thead>
                    <tr>
                        <th scope="col" colspan="4" style="background-color:greenyellow">Loan Details</th>
                    </tr>
                </thead>
                <tbody>
                     
                </tbody>


            </table>
            <div class='col-sm-3'>
                <div class="form-group">
                    <label class="control-label">Select Month<span class="required">*</span></label>
                    <div class="input-group btn-group">
                        <span class="input-group-addon">
                            <i class="fa fa-calendar"></i>
                        </span>
                        @Html.DropDownList("ddlMonth", Model.MonthList, new { @class = "form-control", @disabled = "disabled" })

                    </div>
                    <span id="msgPayConfigTypeedit" style="color:red;"></span>
                </div>
            </div>
            <div class='col-sm-3'>
                <div class="form-group">
                    <label class="control-label">Deduct amount for Leave <span class="required">*</span></label>
                    <div class="input-group btn-group">
                        <span class="input-group-addon">
                            <i class="fa fa-inr"></i>
                        </span>
                        <input type="text" class="form-control" id="txtleaveamt" readonly />
                    </div>
                    <span id="msgPayConfigNameedit" class="ms-error" style="color:red;"></span>

                </div>

            </div>

            <div class='col-sm-3'>
                <div class="form-group">
                    <label class="control-label">Loan Installment <span class="required">*</span></label>
                    <div class="input-group btn-group">
                        <span class="input-group-addon">
                            <i class="fa fa-inr"></i>
                        </span>
                        @Html.TextBoxFor(M => M.EmployeeLoanModel.MonthlyInstallment, new { @class = "form-control", @readonly = "readonly" })
                        @Html.Hidden("txtInstallment", Model.EmployeeLoanModel.MonthlyInstallment)
                    </div>
                    <span id="msgtxtInstallment" class="ms-error" style="color:red;"></span>

                </div>

            </div>

            <div class='col-sm-3'>
                <div class="form-group">
                    <label class="control-label">Total Deduction <span class="required">*</span></label>
                    <div class="input-group btn-group">
                        <span class="input-group-addon">
                            <i class="fa fa-inr"></i>
                        </span>
                        <input type="text" class="form-control" id="txtdedamt" readonly />
                        <input type="hidden" id="txttotdedamount" value="0" />
                    </div>
                    <span id="msgPayConfigNameedit" class="ms-error" style="color:red;"></span>
                </div>
            </div>
            <div class="col-md-3" style="margin-bottom: 50px;">
                <div class="form-group">
                    <label class="control-label">Final Payable Amount</label>
                    <div class="input-group btn-group">
                        <span class="input-group-addon">
                            <i class="fa fa-inr"></i>
                        </span>
                        <input type="text" class="form-control" id="txtfinalamount" readonly style="font-weight: 700;" />
                        <input type="hidden" id="txttotcalamount" value="0" />
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="form-group">
                    <label class="control-label"></label>
                    <div class="input-group btn-group">
                        <input type="button" id="btnSave" class="btn btn-sm btn-primary" value="Process Salary" />
                    </div>
                </div>
            </div>
            <div id="progress" style="display:none;">
                <div class="col-md-12 text-center">
                    <img src="~/Contents/images/ajax-loader.gif" />
                </div>
            </div>


</section>
    <!-- end: page -->
</section>

<script>
    $(document).ready(function () {
        loadallowances();

    });
    var qsparam = "";
    var query = window.location.search.substring(1);
    var parms = query.split('&&');
    for (var i = 0; i < parms.length; i++) {
        var pos = parms[i].indexOf('=');
        if (pos > 0) {
            var key = parms[i].substring(0, pos);
            if (key == "SearchValue") {
                var val = parms[i].substring(pos + 1);
                qsparam = val;
            }
        }
    }
    function GetSalaryHistory(sempid) {
        window.location.href = '/EmployeeList/SalaryHistory?cal=' + sempid + '&&SearchValue=' + qsparam + '';
    }
</script>
<script>
    function loadleaveamount(Gross) {

        var jq = jQuery.noConflict();
        var month = jq("#ddlMonth").val();
        var empno = jq("#empno").val();
        var deduct = 0;
        var finalpay = jq("#txtfinalamount").val();
        var final = 0;
        var deductamt = jq("#txtdedamt").val();
        var Empid = jq("#empid").val();
        jq.ajax({
            type: "POST",
            url: '/EmployeeList/GetDeductamount',
            data: {
                "empno": empno, "month": month, "Empid": Empid, "GrossAmount": Gross
            },
            datatype: JSON,
            success: function (response) {
                //getearningdata(Empid, ConfigureSalaryID);


                //deductamount = parseFloat(response);
                if (response.length > 0) {
                    jq("#txtleaveamt").val(response[0].TotalLeaveAmount);
                    jq("#lblMonthName").html(response[0].Month);
                    jq("#lblWorkingDays").html(response[0].Days);
                    jq("#lblLeaveWithoutPay").html(response[0].noofdays);
                    jq("#lblLeaveWithoutPayamt").html(response[0].leaveAmount);
                    jq("#lblAbsentDays").html(response[0].AbsentDays);
                    jq("#txtLeaveWithoutpay").val(response[0].noofdays);
                    jq("#txtlatedays").val(response[0].lateleave);

                    jq("#lbllatedays").html(response[0].lateleave);
                    jq("#lbllatedaysamt").html(response[0].lateleaveAmount);

                    deduct = parseFloat(deductamt) + parseFloat(response[0].TotalLeaveAmount);
                    jq("#txtdedamt").val(Math.round(deduct));
                    final = parseFloat(finalpay) - parseFloat(response[0].TotalLeaveAmount);
                    jq("#txtfinalamount").val(Math.round(final));
                }
            },
            error: function (er) {
                console.log(er);
            }
        });
    }
</script>
<script>
    function loadallowances() {
        var ID = 0;
        var IDe = 0;
        var id = 0;
        $.ajax({
            type: "POST",
            url: '/ConfigureSalaryComponent/GetPayConfigbyTypeAllowances',
            success: function (response) {
                RecordLength = response.length;
                $("#divDynamicAllowances").empty();
                $("#divDynamicBasci").empty();
                for (ID; ID < RecordLength; ID++) {
                    //
                    if (response[ID].IScalculative == true) {
                        var newrow = '<div id="divedit_' + response[ID].PayConfigId + '">' +

                            '<div class=" row">' +
                            '<div class="col-sm-3" style="width: 200px;">' +
                            '<div class="form-group" >' +
                            '<label id="lblallowances_' + ID + '">' + response[ID].PayConfigName + '</label>' +
                            '<input type="hidden" id="hdnallowances_' + ID + '" />' +
                            '<span class="field-validation-error" id="errorStatus" style="color: Red;"></span>' +
                            '</div>' +
                            '</div>' +



                            '<div class="col-sm-6 input-group btn-group" style="width:150px;">' +
                            '<span class="input-group-addon" id="errorStatus"><i class="fa fa-inr"></i></span>' +
                            '<input type="text" class="form-control clsallowance" id="tPriceedit_' + response[ID].PayConfigId + '"  readonly/>' +
                            '<span class="field-validation-error" id="errorStatus" style="color: Red;"></span>' +
                            '</div>' +
                            '</div>' +

                            '</div>';
                    }
                    else {
                        var newrow = '<div id="divedit_' + response[ID].PayConfigId + '" class="' + response[ID].PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') + '00">' +

                            '<div class=" row">' +
                            '<div class="col-sm-3" style="width: 200px;">' +
                            '<div class="form-group" >' +
                            '<label id="lblallowances_' + ID + '">' + response[ID].PayConfigName + '</label>' +
                            '<input type="hidden" id="hdnallowances_' + ID + '" />' +
                            '<span class="field-validation-error" id="errorStatus" style="color: Red;"></span>' +
                            '</div>' +
                            '</div>' +



                            '<div class="col-sm-6 input-group btn-group" style="width:150px;">' +
                            '<span class="input-group-addon" id="errorStatus"><i class="fa fa-inr"></i></span>' +
                            '<input type="text" class="form-control clsallowance ' + response[ID].PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') + '" id="tPriceedit_' + response[ID].PayConfigId + '" Value="0" readonly />' +
                            '<span class="field-validation-error" id="errorStatus" style="color: Red;"></span>' +
                            '</div>' +
                            '</div>' +

                            '</div>';
                    }
                    //
                    if (response[ID].PayConfigName == "Arrears") {

                        $("#divDynamicArrears").append(newrow);
                        //$("#txtTotalArrears").append(newrow);
                    }
                    else if (response[ID].PayConfigName == "BASIC") {

                        $("#divDynamicBasci").append(newrow);
                    }
                    else {
                        $("#divDynamicAllowances").append(newrow);
                    }

                    document.getElementById('divallowancesID').value = ID + 1;

                }


                $(".GROSSAMOUNT00").hide();
                $(".GROSSAMOUNTS00").hide();
                loaddeducation();
                //loaddata();
            },
            error: function (er) {
                console.log(er);
            }
        });
    }

    function loaddeducation() {
        var ID = 0;
        var id = 0;
        $.ajax({
            type: "POST",
            url: '/ConfigureSalaryComponent/GetPayConfigbyTypeDeducation',
            success: function (response) {
                //
                RecordLength = response.length;

                $("#divDynamicDeducations").empty();
                for (ID; ID < RecordLength; ID++) {
                    var newrow = '<div id="divedit_' + ID + '">' +

                        '<div class="row">' +
                        '<div class="col-sm-2" style="width: 150px;">' +
                        '<div class="form-group">' +
                        '<label id="lblDeducation_' + ID + '">' + response[ID].PayConfigName + '</label>' +
                        '<input type="hidden" id="hdnDeducation_' + ID + '" />' +
                        '<span class="field-validation-error" id="errorStatus" style="color: Red;"></span>' +
                        '</div>' +
                        '</div>' +
                        '<div class="col-sm-6 input-group btn-group">' +
                        '<span class="input-group-addon" id="errorStatus"><i class="fa fa-inr"></i></span>' +
                        '<input type="text" class="form-control clsdeduction" style="width: 150px;" id="tPriceeditDeducation_' + response[ID].PayConfigId + '" value="0" readonly  />' +
                        '<span class="field-validation-error" id="errorStatus" style="color: Red;"></span>' +
                        '</div>' +
                        '</div>' +
                        '</div>'
                    $("#divDynamicDeducations").append(newrow);
                    document.getElementById('divID').value = ID + 1;
                }
                loaddata();
                //getearningdata(SalaryConfigureType);
            },
            error: function (er) {
                console.log(er);
            }
        });
    }
</script>
<script>
    function loaddata() {
        var Empid = $("#empid").val();
        $.ajax({
            type: "POST",
            url: "/EmployeeList/GetEmployeeManualSalaryDetails",
            data: { "Empid": Empid },
            dataType: "json",
            success: function (response) {

                if (response.length > 0) {
                    var gamount = 0;
                    var arrears = 0;
                    var totalAllowances = 0;

                    if (response[0].SalaryConfigureType == "1") {
                        $.each(response, function (index, value) {
                            $("#tPriceedit_" + value.PayConfigID + "").val(value.Values);
                            $("#tPriceeditDeducation_" + value.PayConfigID + "").val(value.Values == null ? 0 : value.Values);
                            if (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "BASIC"
                                || value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "BASICS"
                            ) {

                                if (value.Values == "0")
                                    $("#divedit_" + value.PayConfigID + "").hide();
                            }
                            if (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "STIPEND"
                                || value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "STIPENDS"
                            ) {

                                if (value.Values == "0")
                                    $("#divedit_" + value.PayConfigID + "").hide();
                            }

                            if (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "GROSSAMOUNT"
                                || value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "GROSSAMOUNTS"
                            ) {

                                $("#divedit_" + value.PayConfigID + "").hide();
                                $("#txtBasic").val(value.Values);
                            }
                            if (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "INTERNETALLOWANCE"
                                || value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "INTERNETALLOWANCE"
                            ) {
                                $("#txtinternet").val(value.Values);
                            }
                            if (value.PayConfigType.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "ALLOWANCES"
                                || value.PayConfigType.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "ALLOWANCES"
                            ) {
                                if ((value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "BASIC")
                                    && (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "BASIC")
                                    &&
                                    //(value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "STIPEND")
                                    //&& (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "STIPENDS")
                                    //&&
                                    (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "GROSSAMOUNT")
                                    && (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "GROSSAMOUNT")

                                    && (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "ARREARS")
                                    && (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "ARREARS")
                                ) {
                                    totalAllowances = (parseFloat(totalAllowances) + parseFloat(value.Values));
                                }
                            }

                            if (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "MOBILEALLOWANCE") {
                                $("#txtMobileall").val(value.Values);
                            }
                            // Mayukh New
                            $("#txtContinuous").val(value.ContinuousAllowance);
                        });

                    }
                    else {
                        $.each(response, function (index, value) {
                            $("#tPriceedit_" + value.PayConfigID + "").val(value.Values);
                            $("#tPriceeditDeducation_" + value.PayConfigID + "").val(value.Values == null ? 0 : value.Values);
                            if (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "BASIC"
                                || value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "BASICS"
                            ) {
                                if (value.Values == "0")
                                    $("#divedit_" + value.PayConfigID + "").hide();

                            }
                            if (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "STIPEND"
                                || value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "STIPENDS"
                            ) {
                                if (value.Values == "0")
                                    $("#divedit_" + value.PayConfigID + "").hide();

                            }

                            if (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "GROSSAMOUNT"
                                || value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "GROSSAMOUNTS"
                            ) {
                                $("#divedit_" + value.PayConfigID + "").hide();
                                $("#txtBasic").val(value.Values);
                            }
                            if (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "MOBILEALLOWANCE") {
                                $("#txtMobileall").val(value.Values);
                            }
                            if (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "ARREARS"
                                || value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "ARREAR") {
                                arrears = value.Values;
                            }
                            //
                            if ((value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "BASIC")
                                && (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "BASIC")
                                //&&
                                //(value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "STIPEND")
                                //&& (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "STIPENDS")
                                &&
                                (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "GROSSAMOUNT")
                                && (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "GROSSAMOUNT")

                                && (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "ARREARS")
                                && (value.PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') != "ARREARS")
                            ) {

                                totalAllowances = (parseFloat(totalAllowances) + parseFloat(value.Values));

                            }
                            gamount = parseFloat(gamount) + parseFloat(value.Values) - parseFloat(arrears);
                            // Mayukh New
                            $("#txtContinuous").val(value.ContinuousAllowance);

                        });

                        //$("#txtinternet").val(totalAllowances);
                        //$("#txtBasic").val(gamount);

                        $("#TotalAllowance").val(parseFloat(totalAllowances));
                        //alert(gamount)
                        //$("#txtfgrossamount").val(parseFloat(gamount) - parseFloat($("#txtinternet").val()));
                        //$(".GROSSAMOUNT").val(gamount);
                    }

                    //$("#txtinternet").val(totalAllowancess);
                    getearningdata(response[0].SalaryConfigureType);

                }

            },
            failure: function (response) {
                alert(response.responseText);
            },
            error: function (response) {
                alert(response.responseText);
            }
        });
    }
</script>

<script>
    function getearningdata(SalaryConfigureType) {

        var ID = 0;
        var id = 0;
        var i = 0;
        var count = 0;
        var jq = jQuery.noConflict();
        var Empid = $("#empid").val();
        jq.ajax({
            type: "POST",
            url: '/EmployeeList/GetConfigureSalaryComponentByID',
            data: {
                "Empid": Empid
            },
            datatype: JSON,
            success: function (response) {

                var totalAllowances = 0;
                RecordLength = response.length;
                for (ID; ID < RecordLength; ID++) {

                    if (response[ID].PayConfigType == "Allowances") {
                        if (response[ID].IScalculative == true) {
                            $("#tPriceedit_" + response[ID].PayConfigId + "").val(response[ID].CalculationFormula);
                            totalAllowances = (parseFloat(totalAllowances) + parseFloat(response[ID].CalculationFormula));
                        }
                    }
                    else {
                        if (response[ID].IScalculative == true) {
                            $("#tPriceeditDeducation_" + response[ID].PayConfigId + "").val(response[ID].CalculationFormula);
                        }
                    }
                }
                var internetallownce = $(".INTERNETALLOWANCE").val();
                //$("#TotalAllowance").val(parseFloat(totalAllowances) + parseFloat(internetallownce));
                $("#TotalAllowance").val(parseFloat(totalAllowances) + parseFloat(internetallownce));
                $("#txtTotalArrears").val($(".ARREARS").val());
                DynamicSubTotal(response[0].ConfigureSalaryID, SalaryConfigureType);
            },
            error: function (er) {

                console.log(er);
            }
        });
    }
</script>
<script>
    function DynamicSubTotal(ConfigureSalaryID, SalaryConfigureType) {

        var i = 0;
        var amount = 0;
        var damount = 0;
        var id = 0;
        var totamount = 0;
        var arrears = 0;
        var jq = jQuery.noConflict();
        var basic = jq("#txtBasic").val();
        var mobile = $("#txtMobileall").val();
        if (mobile == "" || mobile == undefined || mobile == null) {
            mobile = 0;
        }
        var ID = 0;
        var did = ID - 1;
        jq.ajax({
            type: "POST",
            url: '/ConfigureSalaryComponent/GetAllPayConfig',
            datatype: JSON,
            success: function (response) {

                RecordLength = response.length;
                for (ID; ID < RecordLength; ID++) {

                    if (response[ID].PayConfigType == "Allowances") {
                        
                        amount = parseFloat(amount) + parseFloat($("#tPriceedit_" + response[ID].PayConfigId + "").val());
                        //alert("#tPriceedit_" + response[ID].PayConfigId+amount)

                        if ($("#tPriceedit_" + response[ID].PayConfigId + "").val() == "0" &&
                            (response[ID].PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "STIPEND"
                                || response[ID].PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "STIPENDS")) {
                            $("#divedit_" + response[ID].PayConfigId + "").hide();
                        }
                        if ($("#tPriceedit_" + response[ID].PayConfigId + "").val() == "0" &&
                            (response[ID].PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "BASIC"
                                || response[ID].PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "BASICS")) {
                            $("#divedit_" + response[ID].PayConfigId + "").hide();
                        }
                        if (response[ID].PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "ARREARS"
                            || response[ID].PayConfigName.toUpperCase().replace(/[^a-z0-9\s]/gi, '').replace(/[-\s]/g, '') == "ARREAR") {
                            arrears = $("#tPriceedit_" + response[ID].PayConfigId + "").val();
                        }
                        //amount = parseFloat(amount) + parseFloat(mobile) + parseFloat(basic);
                        amount = parseFloat(amount);
                        //alert(amount)
                    }
                    if (response[ID].PayConfigType == "Deduction") {
                        damount = parseFloat(damount) + parseFloat($("#tPriceeditDeducation_" + response[ID].PayConfigId + "").val());
                    }

                }
                //alert(SalaryConfigureType)
                if (SalaryConfigureType !== 1) {
                    basic = parseFloat(amount) - parseFloat(arrears);
                }
                //alert(basic)
                $(".GROSSAMOUNT").val(basic);
                var installment = $("#txtInstallment").val();
                //var leaveamount = $("#txtleaveamt").val();
                var totaldeductamount = parseFloat(damount) + parseFloat(installment);
                //totamount = parseFloat(amount) - (parseFloat(totaldeductamount) + parseFloat(basic));
                totamount = (parseFloat(mobile) + parseFloat(basic)) - parseFloat(totaldeductamount);
                $("#txtfinalamount").val(Math.round(totamount));
                //$("#txttotcalamount").val(totamount);
                $("#txtdedamt").val(parseFloat(totaldeductamount));
                //$("#txttotdedamount").val(parseFloat(damount));
                loadContinuousAllowance(arrears, SalaryConfigureType);


            },
            error: function (er) {
                console.log(er);

            }
        });




    }
</script>

<script>
    function loadContinuousAllowance(arrears, SalaryConfigureType) {

        var query = window.location.search.substring(1);
        var parms = query.indexOf('=');
        var Empid = $("#empid").val();
        var jq = jQuery.noConflict();
        var basic = jq(".BASIC").val();
        var gamount = $(".GROSSAMOUNT").val();
        console.log(" loadContinuousAllowance Gross Amount = " + gamount);
        jq.ajax({
            type: "POST",
            url: '/EmployeeList/loadContinuousAllowance',
            data: { "Empid": Empid, "Basic": basic },
            datatype: JSON,
            success: function (response) {

                var TotalAllowance = 0;
                if (SalaryConfigureType !== 1) {
                    //basic = parseFloat(amount) - parseFloat(arrears);

                    jq("#txtContinuous").val(response[0].ContinuousAllowance);
                    jq("#txtProduction").val(response[0].ProductionBonus);
                    jq("#txtOverTime").val(response[0].OvertimeAllowance);
                    var totamount = $("#txtfinalamount").val();
                    TotalAllowance = parseFloat(response[0].ContinuousAllowance) +
                        parseFloat(response[0].ProductionBonus) + parseFloat(response[0].OvertimeAllowance);
                    
                    var grossamount = parseFloat(gamount) + parseFloat(response[0].ContinuousAllowance) +
                        parseFloat(response[0].ProductionBonus) + parseFloat(response[0].OvertimeAllowance);

                    $("#txtfgrossamount").val(grossamount);
                    //alert("net1-" + grossamount)
                    totamount = parseFloat(totamount) + parseFloat(response[0].ContinuousAllowance) + parseFloat(arrears) +
                        parseFloat(response[0].ProductionBonus) + parseFloat(response[0].OvertimeAllowance);
                    var totamount = $("#txtfinalamount").val(Math.round(totamount));
                }
                else {
                    // Mayukh New
                    jq("#txtContinuous").val(response[0].ContinuousAllowance);
                    jq("#txtProduction").val(response[0].ProductionBonus);
                    jq("#txtOverTime").val(response[0].OvertimeAllowance);
                    TotalAllowance = parseFloat(0) +
                        parseFloat(response[0].ProductionBonus) + parseFloat(response[0].OvertimeAllowance);
                    var totamount = $("#txtfinalamount").val();
                    var grossamount = parseFloat(gamount) + parseFloat(0) +
                        parseFloat(response[0].ProductionBonus) + parseFloat(response[0].OvertimeAllowance);
                    $("#txtfgrossamount").val(grossamount);
                     
                    totamount = parseFloat(totamount) + parseFloat(0) + parseFloat(arrears) +
                        parseFloat(response[0].ProductionBonus) + parseFloat(response[0].OvertimeAllowance);
                    var totamount = $("#txtfinalamount").val(Math.round(totamount));

                }
                var totalAllow = $("#txtinternet").val();
                console.log(parseFloat(totalAllow), parseFloat(TotalAllowance));
                //$("#TotalAllowance").val(parseFloat(totalAllow) + parseFloat(TotalAllowance));
                loadleaveamount(grossamount);
            },
            error: function (er) {

                console.log(er);
            }
        });


    }
</script>

<script>
    function SaveLeaveDetails() {
        var jq = jQuery.noConflict();

        var Empno = jq("#empno").val();
        var LeaveDays = jq("#txtLeaveWithoutpay").val();
        var LateLeaveDays = jq("#txtlatedays").val();
        if (LeaveDays == "" || LeaveDays == undefined || LeaveDays == null) {
            LeaveDays = 0;
        }
        if (LateLeaveDays == "" || LateLeaveDays == undefined || LateLeaveDays == null) {
            LateLeaveDays = 0;
        }
        var model = { Empno: Empno, LeaveDays: LeaveDays, LateLeaveDays: LateLeaveDays }
        var jsonData = JSON.stringify(model);
        jq.ajax({
            type: "POST",
            url: '/EmployeeList/SaveLeaveDetails',
            data: function () {
                var data = new FormData();
                data.append("modelParameter", jsonData);
                return data;
            }(),
            processData: false,
            contentType: false,
            success: function (response) {

                alert("Leave Days Saved");
            },
            error(er) {
                console.log(er);
            }
        })
    }
</script>
<script>
    function ChangeLeaveDetails(id, value) {
        var jq = jQuery.noConflict();
        if (value == "") {
            value = 0;
        }
        if (value < 0 || value > 30) {
            jq("#msg" + id + "").html("Please enter value between 0 and 30");
            return false;
        }
        else {
            jq("#msg" + id + "").html("");
        }
        jq("#lbl" + id + "").html(value);
        var LeaveDays = jq("#txtLeaveWithoutpay").val();
        var LateLeaveDays = jq("#txtlatedays").val();
        if (LeaveDays == "" || LeaveDays == undefined || LeaveDays == null) {
            LeaveDays = 0;
        }
        if (LateLeaveDays == "" || LateLeaveDays == undefined || LateLeaveDays == null) {
            LateLeaveDays = 0;
        }
        //var totalabsent

        var grossamount = jq("#txtfgrossamount").val();
        var onedayamt = Math.round(parseFloat(grossamount) / parseFloat(30));
        var leaveamt = Math.round(parseFloat(onedayamt) * parseFloat(value));
        jq("#lbl" + id + "amt").html(leaveamt);
        value = parseFloat(LeaveDays) + parseFloat(LateLeaveDays);

        leaveamt = Math.round(parseFloat(onedayamt) * parseFloat(value));
        var leaveamount = jq("#txtleaveamt").val();
        jq("#txtleaveamt").val(leaveamt);
        var totaldeamt = jq("#txtdedamt").val();
        var TotalDeductamt = parseFloat(totaldeamt) + parseFloat(leaveamt) - parseFloat(leaveamount)
        jq("#txtdedamt").val(TotalDeductamt);
        var finalpayable = jq("#txtfinalamount").val();
        var newfinalpayableamt = parseFloat(finalpayable) + parseFloat(totaldeamt) - parseFloat(TotalDeductamt);
        jq("#txtfinalamount").val(Math.round(newfinalpayableamt));
    }
</script>
<script>
    function BacktoMain() {
        var qsparam = new Array(10);
        var query = window.location.search.substring(1);
        var parms = query.split('&&');

        for (var i = 0; i < parms.length; i++) {
            var pos = parms[i].indexOf('=');
            if (pos > 0) {
                var key = parms[i].substring(0, pos);
                var val = parms[i].substring(pos + 1);
                qsparam[i] = val;
            }
        }

        window.location.href = "/EmployeeList?SearchValue=" + qsparam[1] + "";
    }
</script>
<script>
    /*LWP Calculation  */
    $("#txtLeaveWithoutpay").on('change', function () {
        let lwp = $("#txtLeaveWithoutpay").val() == '' ? 0 : parseInt($("#txtLeaveWithoutpay").val());
        let wdays = parseInt($("#lblWorkingDays").html());
        let totallowance = 0;
        let totalLoss = 0;
        let previosgross = parseFloat($("#txtfgrossamount").val());
        // allowance calculation
        $(".clsallowance").each(function (item) {
            let allowance = $(this).val() == '' ? 0 : parseInt($(this).val());
            let calallowance = 0;
            if (allowance != 0 && $(this).is(":visible")) {
                calallowance = Math.round((allowance / wdays) * lwp);
                allowance = allowance - calallowance;
                $(this).val(allowance);
                totallowance += allowance;
                totalLoss += calallowance
            }
        });
        let basicamount = Math.round($(".BASIC").val());
        let Gross = 0
        // In case all total Allowence is 0 and Gross is given
        if (totallowance != 0) {
            $("#txtfgrossamount").val(totallowance);
            //alert("net2-" + grossamount)
        }
        else {
            Gross = parseInt($("#txtfgrossamount").val());
            totallowance = Gross - Math.round((Gross / wdays) * lwp);
            $("#txtfgrossamount").val(totallowance);
            //alert("net3-" + grossamount)
        }

        $("#TotalAllowance").val(totallowance - basicamount);
        $("#lblLeaveWithoutPayamt").html(totalLoss);
        $("#txtleaveamt").val(totalLoss);

        // Deduction
        // PTAX, PF, ESIC
        let deduction = parseInt($("#tPriceeditDeducation_47").val() == "" ? "0" : $("#tPriceeditDeducation_47").val());
        let totdeduction = 0;
        $(".clsdeduction").each(function (item) {
            let deduction = $(this).val() == '' ? 0 : parseInt($(this).val());
            if (deduction != 0 && $(this).is(":visible")) {
                // PTax always on Gross
                if ($(this).attr('id') == 'tPriceeditDeducation_21') {
                    let ptaxamount = 0;
                    let grossamount = Math.round($("#txtfgrossamount").val());
                    if (grossamount <= 10000) {
                        ptaxamount = 0;
                    }
                    else if (grossamount > 10000 && grossamount <= 15000) {
                        ptaxamount = 110;
                    }
                    else if (grossamount > 15000 && grossamount <= 25000) {
                        ptaxamount = 130;
                    }
                    else if (grossamount > 25000 && grossamount <= 40000) {
                        ptaxamount = 150;
                    }
                    else {
                        ptaxamount = 200;
                    }
                    $("#tPriceeditDeducation_21").val(ptaxamount);
                    totdeduction += ptaxamount;
                }
                // PF New Calculation on Basic (12 %)
                if ($(this).attr('id') == 'tPriceeditDeducation_22') {
                    let basicamount = Math.round($(".BASIC").val());
                    let stipned = Math.round($("#tPriceedit_33").val());
                    let oldPF = $(this).val();
                    let pfamount = oldPF;
                    // IN case PF is applicable
                    if (oldPF != 0) {
                        // Basic Amount is not there (Some Case)
                        if (basicamount == 0) {
                            pfamount = Math.ceil(stipned * .12);
                        }
                        else {
                            pfamount = Math.ceil(basicamount * .12);
                        }
                        $(this).val(pfamount);
                    }
                    totdeduction += pfamount;
                }
                // ESIC New Calculation on Basic (0.75 %)
                if ($(this).attr('id') == 'tPriceeditDeducation_23') {
                    let grossamount = Math.round($("#txtfgrossamount").val());
                    let oldESIC = $(this).val();
                    let esicamount = oldESIC;
                    if (oldESIC != 0) {
                        esicamount = Math.ceil(grossamount * .0075);
                        $(this).val(esicamount);
                    }
                    totdeduction += esicamount;
                }
            }
        });

        //
        let loan = parseInt($("#EmployeeLoanModel_MonthlyInstallment").val() == "" ? "0" : $("#EmployeeLoanModel_MonthlyInstallment").val());
        let tds = parseInt($("#tPriceeditDeducation_44").val() == '' ? "0" : $("#tPriceeditDeducation_44").val());
        totdeduction = (totdeduction + deduction + totalLoss + loan + tds);

        $("#txtdedamt").val(totdeduction);
        let net = 0;
        // Chekcing only Gross amount is given
        if (totdeduction == 0 && lwp != 0) {
            totdeduction = (previosgross - totallowance);
            net = (totallowance);
            totalLoss = totdeduction;
        }
        else {
            net = (previosgross - totdeduction);
        }

        $("#lblLeaveWithoutPayamt").html(totalLoss);
        $("#txtleaveamt").val(totalLoss);
        $("#txtdedamt").val(totdeduction);
        $("#txtfinalamount").val(net);

    });
</script>
<script>
    $("#btnSave").click(function () {
        let users = '@Session["UserName"].ToString();'
        let param = {
            EmpNo: $("#empno").val(),
            Basic: $("#tPriceedit_9").val(),
            HRA: $("#tPriceedit_11").val(),
            Attire: $("#tPriceedit_19").val(),
            Mobile: $("#tPriceedit_18").val(),
            PF: $("#tPriceeditDeducation_22").val(),
            ESI: $("#tPriceeditDeducation_23").val(),
            PTax: $("#tPriceeditDeducation_21").val(),
            Education: $("#tPriceedit_13").val(),
            Medical: $("#tPriceedit_12").val(),
            LTA: $("#tPriceedit_20").val(),
            Gross: $("#txtfgrossamount").val(),
            Loan: $("#EmployeeLoanModel_MonthlyInstallment").val(),
            Continuous: $("#txtContinuous").val(),
            Overtime: $("#txtOverTime").val(),
            Production: $("#txtProduction").val(),
            TotalAllowance: $("#TotalAllowance").val(),
            TotalDeduction: $("#txtdedamt").val(),
            NetPayable: $("#txtfinalamount").val(),
            Performance: $("#tPriceedit_37").val(),
            Special: $("#tPriceedit_38").val(),
            Arrear: $("#txtTotalArrears").val(),
            Books: $("#tPriceedit_15").val(),
            Tranning: $("#tPriceedit_25").val(),
            Convence: $("#tPriceedit_17").val(),
            Vehical: $("#tPriceedit_28").val(),
            Food: $("#tPriceedit_29").val(),
            TDS: $("#tPriceeditDeducation_44").val(),
            LWP: $("#txtLeaveWithoutpay").val(),
            Others: $("#tPriceeditDeducation_47").val(),
            User: users,
            Internet: $("#tPriceedit_16").val(),
            Lodging: $("#tPriceedit_14").val(),
            Stipned: $("#tPriceedit_33").val()
        };
        $.get("/EmployeeList/SalarySave", param, function (data) {
            if (data.a == "") {
                alert("Salary successfully processed...");
            }
        });
    });
</script>


